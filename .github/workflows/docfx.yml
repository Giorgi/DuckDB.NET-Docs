name: Publish Docs

on:
  workflow_dispatch:
  
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Check out docs
      uses: actions/checkout@v4
      with:
        path: src/DuckDB.NET-Docs
    
    - name: Check out DuckDB.NET
      uses: actions/checkout@v4
      with:
        repository: Giorgi/DuckDB.NET
        ref: nightly-scalar-function
        path: src/DuckDB.NET
    
    - name: Setup .NET Core SDK
      uses: actions/setup-dotnet@v4
      with:
        global-json-file: src/DuckDB.NET/global.json
        
    - uses: nunit/docfx-action@v3.4.1
      name: Build Documentation
      with:
        args: src/DuckDB.NET-Docs/docfx.json
        
    - name: Display structure of files
      run: ls -R     
    
